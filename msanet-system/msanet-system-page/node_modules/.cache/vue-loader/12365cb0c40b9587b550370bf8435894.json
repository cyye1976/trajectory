{"remainingRequest":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\src\\views\\interpretation\\analysis\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\src\\views\\interpretation\\analysis\\index.vue","mtime":1642236318471},{"path":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Developer\\Workplace\\msanet-system\\msanet-system-page\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7Z2V0QWN0aW9uLCBwb3N0QWN0aW9ufSBmcm9tICJAL2FwaS9tYW5hZ2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZTogMCwNCiAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSwNCiAgICAgIGxpc3Q6bnVsbCwNCiAgICAgIGRhdGFCZWFuOm51bGwsDQogICAgICBtb2RlbEJlYW46bnVsbCwNCiAgICAgIGRhdGFWaXNpYmxlOiB0cnVlLA0KICAgICAgbW9kZWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGxvYWRSZXN1bHQ6ZmFsc2UsDQogICAgICByZXN1bHRJZDogMCwNCiAgICAgIGFwaVVybDp7DQogICAgICAgIGdldERhdGFMaXN0OiAnL2RhdGEvbGlzdCcsDQogICAgICAgIGdldE1vZGVsTGlzdDogJy9tb2RlbC9saXN0JywNCiAgICAgICAgYW5hbHlzZURhdGE6ICcvaW50ZXJwcmV0YXRpb24vYW5hbHlzZURhdGEnDQogICAgICB9LA0KICAgICAgdXJsOiAiaHR0cHM6Ly9naW1nMi5iYWlkdS5jb20vaW1hZ2Vfc2VhcmNoL3NyYz1odHRwJTNBJTJGJTJGcGljLnFpYW50dWNkbi5jb20lMkY1OHBpYyUyRjI3JTJGNTclMkY4MyUyRjEzczU4UElDMlJLXzEwMjQuanBnJTIxJTJGZnclMkYxMDI0JTJGd2F0ZXJtYXJrJTJGdXJsJTJGTDJsdFlXZGxjeTkzWVhSbGNtMWhjbXN2WkdGMGRTNXdibWMlM0QlMkZyZXBlYXQlMkZ0cnVlJTJGY3JvcCUyRjB4MTAwOWEwYTAmcmVmZXI9aHR0cCUzQSUyRiUyRnBpYy5xaWFudHVjZG4uY29tJmFwcD0yMDAyJnNpemU9Zjk5OTksMTAwMDAmcT1hODAmbj0wJmc9MG4mZm10PWpwZWc/c2VjPTE2NDQ1MDcxMDQmdD1hZTUzNjc3YzQ0YmNhMjY0MGI5MGMyOWMxYzE3OGNiOCINCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mZXRjaERhdGFMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG5leHQoKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmFjdGl2ZSkNCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCl7DQogICAgICAgIHRoaXMuZGF0YVZpc2libGUgPSBmYWxzZQ0KDQogICAgICAgIHRoaXMuZmV0Y2hNb2RlbExpc3QoKQ0KICAgICAgICB0aGlzLm1vZGVsVmlzaWJsZSA9IHRydWUNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMSl7DQogICAgICAgIHRoaXMubW9kZWxWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgdGhpcy5sb2FkUmVzdWx0ID0gdHJ1ZQ0KICAgICAgICAvLyDmiafooYzmlbDmja7liIbmnpDpgLvovpENCiAgICAgICAgcG9zdEFjdGlvbih0aGlzLmFwaVVybC5hbmFseXNlRGF0YSArICIvIiArIHRoaXMuZGF0YUJlYW4uaWQgKyAiLyIgKyB0aGlzLm1vZGVsQmVhbi5pZCkudGhlbigocmVzKT0+ew0KICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpPT57ICAgLy9UT0RPOuiuvue9ruW7tui/n+aJp+ihjCzlpoLmnpzmqKHlnovnrpfms5XlupPlj6/nlKjliJnorrDlvpfljrvmjokNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLnJlc3VsdCkNCiAgICAgICAgICAgIHRoaXMucmVzdWx0SWQgPSByZXMuZGF0YS5yZXN1bHQNCiAgICAgICAgICAgIHRoaXMubG9hZFJlc3VsdCA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmFjdGl2ZSsrDQogICAgICAgICAgfSwzMDAwKTsNCiAgICAgICAgfSkNCiAgICAgIH0NCg0KICAgICAgdGhpcy5hY3RpdmUrKw0KICAgIH0sDQogICAgYmFjaygpew0KICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAxKXsNCiAgICAgICAgdGhpcy5tb2RlbFZpc2libGUgPSBmYWxzZQ0KICAgICAgICB0aGlzLmRhdGFWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfQ0KICAgICAgdGhpcy5hY3RpdmUtLQ0KICAgIH0sDQogICAgZmV0Y2hEYXRhTGlzdCgpew0KICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUNCiAgICAgIGdldEFjdGlvbih0aGlzLmFwaVVybC5nZXREYXRhTGlzdCkudGhlbigocmVzKT0+ew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5yZXN1bHQucmVjb3JkcykNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEucmVzdWx0LnJlY29yZHMNCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0sDQogICAgZmV0Y2hNb2RlbExpc3QoKXsNCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlDQogICAgICBnZXRBY3Rpb24odGhpcy5hcGlVcmwuZ2V0TW9kZWxMaXN0KS50aGVuKChyZXMpPT57DQogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLnJlc3VsdC5yZWNvcmRzKQ0KICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5yZXN1bHQucmVjb3Jkcw0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCl7DQogICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApew0KICAgICAgICB0aGlzLmRhdGFCZWFuID0gdmFsDQogICAgICB9DQogICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDEpew0KICAgICAgICB0aGlzLm1vZGVsQmVhbiA9IHZhbA0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlUmVzZXQoKXsNCiAgICAgIHRoaXMuYWN0aXZlID0gMA0KICAgICAgdGhpcy5kYXRhVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuZGF0YUJlYW4gPSBudWxsDQogICAgICB0aGlzLm1vZGVsQmVhbiA9IG51bGwNCiAgICB9LA0KICAgIHRlc3RDbGljaygpew0KICAgICAgdGhpcy5sb2FkUmVzdWx0ID0gZmFsc2UNCiAgICAgIHRoaXMuYWN0aXZlKysNCiAgICB9LA0KICAgIHZpc0NsaWNrKGUpew0KICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvdmlzL3ZpcycsIHF1ZXJ5OntpZDogZX19KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/interpretation/analysis","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-steps :active=\"active\" finish-status=\"success\">\r\n      <el-step title=\"选择数据\" ></el-step>\r\n      <el-step title=\"选择模型\" ></el-step>\r\n      <el-step title=\"分析结果\" ></el-step>\r\n    </el-steps>\r\n    <div style=\"padding-top: 40px;text-align: center\">\r\n      <div v-if=\"dataVisible\">\r\n        <div>\r\n          <el-table\r\n            v-loading=\"listLoading\"\r\n            :data=\"list\"\r\n            element-loading-text=\"Loading\"\r\n            border\r\n            fit\r\n            highlight-current-row\r\n            @current-change=\"handleCurrentChange\">\r\n            <el-table-column align=\"center\" label=\"ID\" width=\"95\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.id }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"描述\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.description }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"创建时间\" width=\"200\">\r\n              <template slot-scope=\"scope\">\r\n                <i class=\"el-icon-time\" />\r\n                <span>{{ scope.row.createTime }}</span>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"modelVisible\">\r\n        <el-table\r\n          v-loading=\"listLoading\"\r\n          :data=\"list\"\r\n          element-loading-text=\"Loading\"\r\n          border\r\n          fit\r\n          highlight-current-row\r\n          @current-change=\"handleCurrentChange\">\r\n            <el-table-column align=\"center\" label=\"ID\" width=\"95\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.id}}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"名称\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.name }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"描述\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{ scope.row.description }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"created_at\" label=\"创建时间\" width=\"200\">\r\n              <template slot-scope=\"scope\">\r\n                <i class=\"el-icon-time\" />\r\n                <span>{{ scope.row.createTime }}</span>\r\n              </template>\r\n            </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div v-if=\"active === 0\">\r\n        <el-button style=\"margin-top: 12px;\" class=\"el-footer\" type=\"success\" @click=\"next\">下一步</el-button>\r\n      </div>\r\n      <div v-if=\"active === 1\">\r\n        <el-button style=\"margin-top: 12px;\" class=\"el-footer\" type=\"danger\" @click=\"back\">返回</el-button>\r\n        <el-button style=\"margin-top: 12px;\" class=\"el-footer\" type=\"success\" @click=\"next\">下一步</el-button>\r\n      </div>\r\n      <div v-if=\"loadResult === true\">\r\n        <el-main v-loading=\"loadResult\" v-if=\"loadResult === true\" style=\"height: 200px;\">\r\n            正在分析数据，请稍后...\r\n        </el-main>\r\n<!--        <el-button type=\"primary\" @click=\"testClick\" v-if=\"loadResult == true\">完成</el-button>-->\r\n      </div>\r\n      <div v-if=\"active === 3\">\r\n        <div v-if=\"loadResult === false\">\r\n            <span>\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"url\"></el-image>\r\n            </span><br>\r\n          <div style=\"height: 30px\"></div>\r\n          <span>分析完成</span><br>\r\n          <div style=\"height: 10px\"></div>\r\n          <span>请根据以下按钮提示进行操作</span>\r\n        </div>\r\n        <div style=\"padding-top: 30px\" v-if=\"loadResult === false\">\r\n          <span style=\"padding-right: 20px\">\r\n            <el-button type=\"danger\" @click=\"handleReset\">返回第一步</el-button>\r\n          </span>\r\n          <el-button type=\"primary\" @click=\"visClick(resultId)\">可视化结果</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {getAction, postAction} from \"@/api/manage\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      active: 0,\r\n      listLoading: false,\r\n      list:null,\r\n      dataBean:null,\r\n      modelBean:null,\r\n      dataVisible: true,\r\n      modelVisible: false,\r\n      loadResult:false,\r\n      resultId: 0,\r\n      apiUrl:{\r\n        getDataList: '/data/list',\r\n        getModelList: '/model/list',\r\n        analyseData: '/interpretation/analyseData'\r\n      },\r\n      url: \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.qiantucdn.com%2F58pic%2F27%2F57%2F83%2F13s58PIC2RK_1024.jpg%21%2Ffw%2F1024%2Fwatermark%2Furl%2FL2ltYWdlcy93YXRlcm1hcmsvZGF0dS5wbmc%3D%2Frepeat%2Ftrue%2Fcrop%2F0x1009a0a0&refer=http%3A%2F%2Fpic.qiantucdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1644507104&t=ae53677c44bca2640b90c29c1c178cb8\"\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchDataList()\r\n  },\r\n  methods: {\r\n    next() {\r\n      console.log(this.active)\r\n      if (this.active === 0){\r\n        this.dataVisible = false\r\n\r\n        this.fetchModelList()\r\n        this.modelVisible = true\r\n      }\r\n      if (this.active === 1){\r\n        this.modelVisible = false\r\n        this.loadResult = true\r\n        // 执行数据分析逻辑\r\n        postAction(this.apiUrl.analyseData + \"/\" + this.dataBean.id + \"/\" + this.modelBean.id).then((res)=>{\r\n          this.timer = setTimeout(()=>{   //TODO:设置延迟执行,如果模型算法库可用则记得去掉\r\n            console.log(res.data.result)\r\n            this.resultId = res.data.result\r\n            this.loadResult = false\r\n            this.active++\r\n          },3000);\r\n        })\r\n      }\r\n\r\n      this.active++\r\n    },\r\n    back(){\r\n      if (this.active === 1){\r\n        this.modelVisible = false\r\n        this.dataVisible = true\r\n      }\r\n      this.active--\r\n    },\r\n    fetchDataList(){\r\n      this.listLoading = true\r\n      getAction(this.apiUrl.getDataList).then((res)=>{\r\n        console.log(res.data.result.records)\r\n        this.list = res.data.result.records\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    fetchModelList(){\r\n      this.listLoading = true\r\n      getAction(this.apiUrl.getModelList).then((res)=>{\r\n        console.log(res.data.result.records)\r\n        this.list = res.data.result.records\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    handleCurrentChange(val){\r\n      if (this.active === 0){\r\n        this.dataBean = val\r\n      }\r\n      if (this.active === 1){\r\n        this.modelBean = val\r\n      }\r\n    },\r\n    handleReset(){\r\n      this.active = 0\r\n      this.dataVisible = true\r\n      this.dataBean = null\r\n      this.modelBean = null\r\n    },\r\n    testClick(){\r\n      this.loadResult = false\r\n      this.active++\r\n    },\r\n    visClick(e){\r\n      console.log(e)\r\n      this.$router.push({path:'/vis/vis', query:{id: e}})\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}